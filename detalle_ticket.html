<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soporte UTN - Detalle Técnico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .timeline-item { position: relative; padding-left: 32px; border-left: 2px solid #e2e8f0; margin-bottom: 24px; }
        .timeline-dot { position: absolute; left: -9px; top: 0; width: 16px; height: 16px; border-radius: 50%; border: 4px solid white; }
    </style>
</head>
<body class="min-h-screen pb-12">

    <div class="fixed top-4 right-4 flex gap-3 z-50">
        <button onclick="window.history.back()" class="w-12 h-12 bg-white text-[#003462] rounded-full shadow-xl flex items-center justify-center border border-slate-200 hover:bg-slate-50 transition-all">
            <i data-lucide="arrow-left"></i>
        </button>
        <a href="index.html" class="w-12 h-12 bg-red-600 text-white rounded-full shadow-xl flex items-center justify-center hover:bg-red-700 transition-all">
            <i data-lucide="log-out"></i>
        </a>
    </div>

    <header class="bg-[#003462] text-white pt-12 pb-24 px-6 text-center md:text-left">
        <div class="max-w-3xl mx-auto">
            <div class="flex items-center justify-center md:justify-start gap-2 mb-2 text-blue-300 font-bold text-[10px] uppercase tracking-[0.2em]">
                <i data-lucide="hash" size="14"></i> TICKET <span id="id-label">0000</span>
            </div>
            <h1 id="titulo-tkt" class="text-3xl font-black uppercase tracking-tighter italic italic">Cargando...</h1>
        </div>
    </header>

    <main class="max-w-3xl mx-auto px-6 -mt-12">
        <div class="bg-white rounded-3xl p-8 shadow-xl mb-6 border border-slate-100">
            <h3 class="text-[10px] font-black text-slate-400 uppercase mb-3 tracking-widest">Descripción del Usuario</h3>
            <p id="desc-tkt" class="text-slate-700 leading-relaxed font-medium"></p>
        </div>

        <div class="bg-white rounded-3xl p-8 shadow-xl border border-slate-100">
            <h3 class="text-[10px] font-black text-slate-400 uppercase mb-8 tracking-widest border-b pb-4 italic">Intervenciones Registradas</h3>
            <div id="timeline-container">
                </div>
        </div>
    </main>

    <script>
        // DATOS DIFERENCIADOS PARA CADA TICKET
        const baseDeDatos = {
            "8912": {
                titulo: "Falla Wi-Fi - Aula 204",
                descripcion: "Conexión inestable durante el dictado de clases. Los dispositivos pierden sincronización constantemente.",
                pasos: [
                    { fecha: "24/10/2023 09:10", autor: "EQUIPO TÉCNICO", msg: "Ticket recibido. Se inicia monitoreo de tráfico en el nodo correspondiente.", color: "bg-blue-500" },
                    { fecha: "24/10/2023 11:30", autor: "EQUIPO TÉCNICO", msg: "Se detectó interferencia en el canal. Se procede a reconfigurar frecuencias.", color: "bg-amber-500" },
                    { fecha: "24/10/2023 14:45", autor: "EQUIPO TÉCNICO", msg: "Configuración aplicada. Estabilidad verificada en sitio.", color: "bg-green-500" }
                ]
            },
            "8850": {
                titulo: "Instalación SPSS - Lab C",
                descripcion: "Se requiere software estadístico para el laboratorio de computación por examen final.",
                pasos: [
                    { fecha: "15/10/2023 08:30", autor: "EQUIPO TÉCNICO", msg: "Solicitud validada. Se descarga imagen oficial del software.", color: "bg-blue-500" },
                    { fecha: "15/10/2023 13:00", autor: "EQUIPO TÉCNICO", msg: "Instalación masiva completada en todas las terminales. Licencias activadas.", color: "bg-green-500" }
                ]
            },
            "8930": {
                titulo: "Insumos - Depto. Alumnos",
                descripcion: "Urgente: La impresora central se quedó sin toner negro.",
                pasos: [
                    { fecha: "Hoy 09:15", autor: "EQUIPO TÉCNICO", msg: "Ticket en espera. Se solicitó el retiro de insumo del depósito central.", color: "bg-red-500" }
                ]
            }
        };

        // Lógica para detectar qué ticket mostrar
        const params = new URLSearchParams(window.location.search);
        const idUrl = params.get('id');
        
        // Si el ID existe en nuestra base, lo usamos. Si no, usamos el 8912 por defecto.
        const tkt = baseDeDatos[idUrl] || baseDeDatos["8912"];

        // Inyectar en el HTML
        document.getElementById('id-label').innerText = idUrl || "8912";
        document.getElementById('titulo-tkt').innerText = tkt.titulo;
        document.getElementById('desc-tkt').innerText = tkt.descripcion;

        const container = document.getElementById('timeline-container');
        container.innerHTML = ""; // Limpiar antes de llenar

        tkt.pasos.forEach(p => {
            container.innerHTML += `
                <div class="timeline-item">
                    <div class="timeline-dot ${p.color}"></div>
                    <div class="text-[10px] font-bold text-slate-400 uppercase mb-1">${p.fecha}</div>
                    <div class="text-[11px] font-black text-[#003462] mb-2 uppercase tracking-tight italic">${p.autor}</div>
                    <div class="text-sm text-slate-600 bg-slate-50 p-4 rounded-2xl border border-slate-100 shadow-sm">${p.msg}</div>
                </div>
            `;
        });

        lucide.createIcons();
    </script>
</body>
</html>
