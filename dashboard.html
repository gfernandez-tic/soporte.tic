<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soporte UTN - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        /* Los elementos de admin están ocultos por defecto */
        .admin-only { display: none !important; }
    </style>
</head>
<body class="bg-slate-100 min-h-screen">

    <nav class="bg-[#003462] p-4 text-white shadow-xl">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i data-lucide="layout-dashboard" size="20"></i>
                <h1 class="font-black uppercase tracking-tighter text-lg">Secretaría TIC</h1>
            </div>
            <div class="flex items-center gap-4">
                <span id="roleBadge" class="text-[10px] px-3 py-1 rounded-full font-bold uppercase border border-white/20">
                    Verificando...
                </span>
                <a href="index.html" class="text-xs bg-white/10 hover:bg-white/20 px-3 py-1 rounded-lg transition-all">Salir</a>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-8 md:p-16">
        <header class="text-center mb-12">
            <h2 class="text-2xl font-black text-slate-800 uppercase tracking-tight">Sistema de Gestión de Incidentes</h2>
            <p class="text-slate-500 text-sm mt-2">Bienvenido al portal de soporte técnico institucional</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            
            <div class="group">
                <a href="ingreso.html" class="flex flex-col items-center justify-center bg-white border-2 border-transparent hover:border-red-500 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 h-full">
                    <div class="p-4 bg-red-50 text-red-600 rounded-2xl mb-4 group-hover:scale-110 transition-transform">
                        <i data-lucide="plus-circle" size="32"></i>
                    </div>
                    <span class="font-black text-slate-800 uppercase tracking-widest text-sm text-center">Crear Ticket</span>
                    <span class="text-[10px] text-slate-400 mt-2 text-center uppercase font-bold">Nueva solicitud de soporte</span>
                </a>
            </div>

            <div class="group">
                <a href="ver_tickets.html" class="flex flex-col items-center justify-center bg-white border-2 border-transparent hover:border-slate-500 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 h-full">
                    <div class="p-4 bg-slate-50 text-slate-600 rounded-2xl mb-4 group-hover:scale-110 transition-transform">
                        <i data-lucide="list" size="32"></i>
                    </div>
                    <span class="font-black text-slate-800 uppercase tracking-widest text-sm text-center">Ver mis Tickets</span>
                    <span class="text-[10px] text-slate-400 mt-2 text-center uppercase font-bold">Estado de mis reclamos</span>
                </a>
            </div>

            <div id="adminPanel1" class="admin-only group">
                <a href="gestion_tkt.html" class="flex flex-col items-center justify-center bg-white border-2 border-transparent hover:border-blue-600 p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 h-full">
                    <div class="p-4 bg-blue-50 text-blue-600 rounded-2xl mb-4 group-hover:scale-110 transition-transform">
                        <i data-lucide="settings" size="32"></i>
                    </div>
                    <span class="font-black text-slate-800 uppercase tracking-widest text-sm text-center">Gestión de Tickets</span>
                    <span class="text-[10px] text-slate-400 mt-2 text-center uppercase font-bold">Mesa de ayuda institucional</span>
                </a>
            </div>

            <div id="adminPanel2" class="admin-only group">
                <a href="Panel.html" class="flex flex-col items-center justify-center bg-white border-2 border-transparent hover:border-black p-8 rounded-3xl shadow-sm hover:shadow-xl transition-all duration-300 h-full">
                    <div class="p-4 bg-slate-100 text-black rounded-2xl mb-4 group-hover:scale-110 transition-transform">
                        <i data-lucide="bar-chart-3" size="32"></i>
                    </div>
                    <span class="font-black text-slate-800 uppercase tracking-widest text-sm text-center">Panel de Control</span>
                    <span class="text-[10px] text-slate-400 mt-2 text-center uppercase font-bold">Métricas y estadísticas</span>
                </a>
            </div>

        </div>
    </main>

    <footer class="fixed bottom-0 w-full p-4 text-center">
        <p class="text-[9px] text-slate-400 font-bold uppercase tracking-[0.2em]">Universidad Tecnológica Nacional - Rectorado</p>
    </footer>

    <script>
        // 1. Inicializar iconos
        lucide.createIcons();

        // 2. Lógica de Roles por URL
        function applyRole() {
            const params = new URLSearchParams(window.location.search);
            const role = params.get('role');
            
            const badge = document.getElementById('roleBadge');
            const adminItems = document.querySelectorAll('.admin-only');

            console.log("Rol en sesión:", role);

            if (role === 'admin') {
                // Configurar Inter